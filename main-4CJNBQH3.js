import{a as re,b as c}from"./chunk-H5EXC2SG.js";import{a as T}from"./chunk-EANEDKLI.js";import"./chunk-7LRLGX2J.js";import"./chunk-VX6I5IJU.js";import{a as oe}from"./chunk-CJUUOSIQ.js";import"./chunk-MIMWGAFJ.js";import"./chunk-S4BGLZ2S.js";import{b as ie}from"./chunk-M7YNLJA7.js";import"./chunk-ARLDRMJR.js";import{b as Q,c as u,d as ee,e as te,f as ne}from"./chunk-MCHKK77N.js";import{a as q,d as J,e as K,h as P}from"./chunk-RTAFBYSH.js";import{A as C,Db as r,E as M,Eb as i,Ec as A,Fb as m,H as U,Hb as Z,Jb as p,Kb as b,R as z,Vb as l,X as y,Ya as Y,Za as h,ba as s,g as V,ib as D,ic as X,ja as f,ka as v,l as g,la as w,ma as N,na as G,nb as _,p as S,qb as W,wb as E,y as B,zb as x}from"./chunk-YXS2TKPT.js";import"./chunk-2VMXMS7J.js";var O=class e{api=s(re);auth=s(c);router=s(u);snack=s(ie);refreshing$=new V(!1);refreshedToken$=new V(null);refreshOnce(){let o=this.refreshing$.getValue(),n=this.auth.getRefreshTokenSnapshot();return n?o?this.refreshedToken$.pipe(B(t=>!!t),M(1)):(this.refreshing$.next(!0),this.refreshedToken$.next(null),this.api.refresh(n).pipe(S(t=>(this.auth.setTokens(t.accessToken,t.refreshToken),this.refreshedToken$.next(t.accessToken),console.log("Token renovado com sucesso"),t.accessToken)),C(t=>{console.error("Falha ao renovar token:",t);let a=t?.error?.message||"Sua sess\xE3o expirou";return this.handleRefreshFailure(a),g(()=>t)}),U(()=>this.refreshing$.next(!1)))):(this.handleRefreshFailure("Sess\xE3o expirada"),g(()=>new Error("Sem refreshToken.")))}handleRefreshFailure(o){this.auth.logout();let n=this.router.url,t=n!=="/login"?n:"/pets";this.snack.error(`${o}. Fa\xE7a login novamente.`),setTimeout(()=>{this.router.navigate(["/login"],{queryParams:{returnUrl:t}})},500)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=y({token:e,factory:e.\u0275fac,providedIn:"root"})};function ae(e){return e.includes("/autenticacao/login")||e.includes("/autenticacao/refresh")}var le=(e,o)=>{let n=s(c),t=s(O),a=n.getAccessTokenSnapshot();if(!a||ae(e.url))return o(e);let k=e.clone({setHeaders:{Authorization:`Bearer ${a}`}});return o(k).pipe(C(d=>d?.status!==401?g(()=>d):ae(e.url)?g(()=>d):t.refreshOnce().pipe(z(F=>{let ce=e.clone({setHeaders:{Authorization:`Bearer ${F}`}});return o(ce)}),C(F=>g(()=>F)))))};var H=class e extends T{itemsPerPageLabel="Itens por p\xE1gina:";nextPageLabel="Pr\xF3xima p\xE1gina";previousPageLabel="P\xE1gina anterior";firstPageLabel="Primeira p\xE1gina";lastPageLabel="\xDAltima p\xE1gina";getRangeLabel=(o,n,t)=>{if(t===0)return`0 de ${t}`;let a=o*n,k=a<t?Math.min(a+n,t):a+n;return`${a+1} \u2013 ${k} de ${t}`};static \u0275fac=(()=>{let o;return function(t){return(o||(o=G(e)))(t||e)}})();static \u0275prov=y({token:e,factory:e.\u0275fac})};var L=e=>{let o=s(c),n=s(u);return o.initFromStorage(),o.isAuthenticated$.pipe(M(1),S(t=>{if(t)return!0;let k="/"+e.pathFromRoot.map(d=>d.url.map(j=>j.toString())).flat().filter(d=>d.length>0).join("/");return n.createUrlTree(["/login"],{queryParams:{returnUrl:k}})}))};var se=[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",loadComponent:()=>import("./chunk-RKZJDJR3.js").then(e=>e.LoginPage)},{path:"pets",canActivate:[L],loadChildren:()=>import("./chunk-224ZH6CW.js").then(e=>e.PETS_ROUTES)},{path:"tutores",canActivate:[L],loadChildren:()=>import("./chunk-DC5WAGPI.js").then(e=>e.TUTORES_ROUTES)},{path:"health-checks",canActivate:[L],loadChildren:()=>import("./chunk-5MZRQ5G4.js").then(e=>e.HEALTH_ROUTES)},{path:"contato",loadChildren:()=>import("./chunk-YPNEKLRS.js").then(e=>e.CONTACT_ROUTES)},{path:"**",redirectTo:"pets"}];function me(e){return()=>e.loadConfig()}var pe={providers:[X({eventCoalescing:!0}),ne(se),J(K([le])),{provide:W,useFactory:me,deps:[P],multi:!0},{provide:T,useClass:H},oe()]};function de(e,o){e&1&&(w(),m(0,"path",19))}function ge(e,o){e&1&&(w(),m(0,"path",20))}function he(e,o){if(e&1){let n=Z();r(0,"div",21)(1,"a",22),p("click",function(){f(n);let a=b();return v(a.isMobileMenuOpen=!1)}),r(2,"span",23),l(3,"\u{1F436}"),i(),l(4," Pets "),i(),r(5,"a",24),p("click",function(){f(n);let a=b();return v(a.isMobileMenuOpen=!1)}),r(6,"span",23),l(7,"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}"),i(),l(8," Tutores "),i(),r(9,"a",25),p("click",function(){f(n);let a=b();return v(a.isMobileMenuOpen=!1)}),r(10,"span",23),l(11,"\u{1FA7A}"),i(),l(12," Health Checks "),i(),r(13,"a",26),p("click",function(){f(n);let a=b();return v(a.isMobileMenuOpen=!1)}),r(14,"span",23),l(15,"\u{1F4DE}"),i(),l(16," Contato "),i(),m(17,"div",27),r(18,"button",28),p("click",function(){f(n);let a=b();return v(a.logout())}),r(19,"span",23),l(20,"\u{1F6AA}"),i(),l(21," Sair "),i()()}}var R=class e{isScrolled=!1;auth=s(c);router=s(u);isMobileMenuOpen=!1;onWindowScroll(){this.isScrolled=window.scrollY>20}toggleMobileMenu(){this.isMobileMenuOpen=!this.isMobileMenuOpen}logout(){this.auth.logout(),this.router.navigateByUrl("/login")}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=D({type:e,selectors:[["app-header"]],hostBindings:function(n,t){n&1&&p("scroll",function(){return t.onWindowScroll()},!1,Y)},decls:41,vars:15,consts:[[1,"sticky","top-0","z-[1000]","transition-all","duration-300","w-full"],[1,"container","mx-auto","px-4","flex","items-center","justify-between"],["routerLink","/pets",1,"flex","items-center","gap-2","group","cursor-pointer",3,"click"],[1,"bg-orange-500","rounded-full","p-2","text-white","group-hover:scale-110","transition-transform"],[1,"text-2xl"],[1,"text-2xl","font-black","text-gray-800","tracking-tight","group-hover:text-orange-600","transition-colors"],[1,"text-orange-500"],[1,"hidden","md:flex","items-center","gap-1","bg-white/50","backdrop-blur-sm","px-6","py-2","rounded-full","shadow-sm","border","border-white/20"],["routerLink","/pets","routerLinkActive","active-link",1,"nav-item"],[1,"icon"],[1,"label"],["routerLink","/tutores","routerLinkActive","active-link",1,"nav-item"],["routerLink","/health-checks","routerLinkActive","active-link",1,"nav-item"],["routerLink","/contato","routerLinkActive","active-link",1,"nav-item"],[1,"hidden","md:flex","items-center","gap-2","px-5","py-2","rounded-full","bg-red-50","text-red-500","font-bold","hover:bg-red-500","hover:text-white","transition-all","duration-300","hover:shadow-lg","transform","hover:-translate-y-0.5","active:scale-95",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","2.5","stroke","currentColor",1,"size-5"],["stroke-linecap","round","stroke-linejoin","round","d","M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 2.062-5M12 12h9.188"],[1,"md:hidden","p-2","text-gray-600","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-8","w-8"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16m-7 6h7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"md:hidden","absolute","top-full","left-0","right-0","bg-white","shadow-lg","border-t","border-gray-100","flex","flex-col","p-4","gap-2","animate-fade-in-down"],["routerLink","/pets","routerLinkActive","bg-orange-50 text-orange-600",1,"mobile-nav-item",3,"click"],[1,"text-xl"],["routerLink","/tutores","routerLinkActive","bg-orange-50 text-orange-600",1,"mobile-nav-item",3,"click"],["routerLink","/health-checks","routerLinkActive","bg-orange-50 text-orange-600",1,"mobile-nav-item",3,"click"],["routerLink","/contato","routerLinkActive","bg-orange-50 text-orange-600",1,"mobile-nav-item",3,"click"],[1,"h-px","bg-gray-100","my-2"],[1,"mobile-nav-item","text-red-500","hover:bg-red-50",3,"click"]],template:function(n,t){n&1&&(r(0,"header",0)(1,"div",1)(2,"div",2),p("click",function(){return t.isMobileMenuOpen=!1}),r(3,"div",3)(4,"span",4),l(5,"\u{1F43E}"),i()(),r(6,"h1",5),l(7," Pet"),r(8,"span",6),l(9,"Friends"),i()()(),r(10,"nav",7)(11,"a",8)(12,"span",9),l(13,"\u{1F436}"),i(),r(14,"span",10),l(15,"Pets"),i()(),r(16,"a",11)(17,"span",9),l(18,"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}"),i(),r(19,"span",10),l(20,"Tutores"),i()(),r(21,"a",12)(22,"span",9),l(23,"\u{1FA7A}"),i(),r(24,"span",10),l(25,"Health Checks"),i()(),r(26,"a",13)(27,"span",9),l(28,"\u{1F4DE}"),i(),r(29,"span",10),l(30,"Contato"),i()()(),r(31,"button",14),p("click",function(){return t.logout()}),r(32,"span"),l(33,"Sair"),i(),w(),r(34,"svg",15),m(35,"path",16),i()(),N(),r(36,"button",17),p("click",function(){return t.toggleMobileMenu()}),w(),r(37,"svg",18),_(38,de,1,0,":svg:path",19)(39,ge,1,0,":svg:path",20),i()()(),_(40,he,22,0,"div",21),i()),n&2&&(E("bg-white",t.isScrolled)("backdrop-blur-none",t.isScrolled)("shadow-lg",t.isScrolled)("py-2",t.isScrolled)("py-4",!t.isScrolled)("bg-transparent",!t.isScrolled),h(38),x(t.isMobileMenuOpen?-1:38),h(),x(t.isMobileMenuOpen?39:-1),h(),x(t.isMobileMenuOpen?40:-1))},dependencies:[A,ee,te],styles:["[_nghost-%COMP%]{display:block;width:100%}.nav-item[_ngcontent-%COMP%]{display:flex;cursor:pointer;align-items:center;gap:.5rem;border-radius:9999px;padding:.5rem 1rem;font-weight:700;--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.nav-item[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(255 247 237 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity))}.nav-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1.25rem;line-height:1.75rem;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.nav-item[_ngcontent-%COMP%]:hover   .icon[_ngcontent-%COMP%]{--tw-scale-x: 1.25;--tw-scale-y: 1.25;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active-link[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(255 237 213 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity))}.mobile-nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;border-radius:.75rem;padding:.75rem 1rem;font-weight:700;--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity));transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.mobile-nav-item[_ngcontent-%COMP%]:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity))}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInDown .3s ease-out forwards}"]})};function fe(e,o){e&1&&m(0,"app-header")}var I=class e{title(o){throw new Error("Method not implemented.")}auth=s(c);router=s(u);config=s(P);get appVersion(){return this.config.config.APP_VERSION}get isLoggedIn(){return!window.location.pathname.includes("/login")}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=D({type:e,selectors:[["app-root"]],decls:6,vars:3,consts:[[1,"min-h-screen","bg-gradient-to-b","from-sky-300","via-teal-200","to-green-200","relative"],[1,"clouds","cloud-1"],[1,"clouds","cloud-2"],[1,"container","mx-auto","px-4","relative","z-10"]],template:function(n,t){n&1&&(r(0,"div",0),m(1,"div",1)(2,"div",2),_(3,fe,1,0,"app-header"),r(4,"main",3),m(5,"router-outlet"),i()()),n&2&&(h(3),x(t.isLoggedIn?3:-1),h(),E("py-6",t.isLoggedIn))},dependencies:[A,Q,R],styles:['.clouds[_ngcontent-%COMP%]{position:absolute;opacity:.2;pointer-events:none}.cloud-1[_ngcontent-%COMP%]{top:2.5rem;left:5rem}.cloud-1[_ngcontent-%COMP%]:before{content:"";display:block;width:120px;height:60px;background:radial-gradient(ellipse 30px 20px at 30px 30px,white 100%,transparent 100%),radial-gradient(ellipse 35px 22px at 60px 25px,white 100%,transparent 100%),radial-gradient(ellipse 30px 18px at 90px 30px,white 100%,transparent 100%)}.cloud-2[_ngcontent-%COMP%]{top:8rem;right:8rem}.cloud-2[_ngcontent-%COMP%]:before{content:"";display:block;width:100px;height:50px;background:radial-gradient(ellipse 25px 18px at 25px 25px,white 100%,transparent 100%),radial-gradient(ellipse 28px 20px at 50px 22px,white 100%,transparent 100%),radial-gradient(ellipse 25px 16px at 75px 25px,white 100%,transparent 100%)}']})};q(I,pe).catch(e=>console.error(e));
