import{b as de}from"./chunk-CJUUOSIQ.js";import{b as ge}from"./chunk-GOCKSI27.js";import{a as ue,b as pe}from"./chunk-E3FWN4IT.js";import{b as se}from"./chunk-FDZI6VLF.js";import{i as me}from"./chunk-MIMWGAFJ.js";import{b as Z,d as p,f as ee,g as te,j as ie,m as ne,n as oe,p as re,q as le,r as ae}from"./chunk-S4BGLZ2S.js";import{a as ce,b as fe}from"./chunk-X4BXCJEK.js";import{b as X}from"./chunk-M7YNLJA7.js";import{D as Q,I as W}from"./chunk-ARLDRMJR.js";import{a as J,c as Y,d as K}from"./chunk-MCHKK77N.js";import{c as H}from"./chunk-RTAFBYSH.js";import{Bc as R,Db as n,Eb as t,Ec as G,Fb as f,Jb as V,Vb as o,Wb as D,X as A,Xb as j,Za as l,ba as s,cc as b,dc as _,ib as L,nb as d,ub as g,wb as c,zb as u}from"./chunk-YXS2TKPT.js";import"./chunk-2VMXMS7J.js";var U=class r{http=s(H);baseUrl="https://brasilapi.com.br/api/cep/v2";consultarCep(i){let a=i.replace(/\D/g,"");return this.http.get(`${this.baseUrl}/${a}`)}static \u0275fac=function(a){return new(a||r)};static \u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})};function ve(r,i){r&1&&(n(0,"span",10),o(1,"Nome \xE9 obrigat\xF3rio (min 3 caracteres)"),t())}function he(r,i){r&1&&(n(0,"span",10),o(1,"Email inv\xE1lido"),t())}function Ce(r,i){r&1&&(n(0,"span",10),o(1,"Telefone obrigat\xF3rio"),t())}function Pe(r,i){r&1&&(n(0,"span",10),o(1,"CPF inv\xE1lido"),t())}function Ee(r,i){r&1&&f(0,"mat-spinner",19)}function xe(r,i){r&1&&(n(0,"mat-icon"),o(1,"search"),t())}function Se(r,i){r&1&&(n(0,"span",10),o(1,"CEP obrigat\xF3rio"),t())}function Me(r,i){r&1&&(n(0,"span",10),o(1,"Obrigat\xF3rio"),t())}function ye(r,i){r&1&&(n(0,"span",10),o(1,"Logradouro obrigat\xF3rio"),t())}function Te(r,i){r&1&&(n(0,"span",10),o(1,"Bairro obrigat\xF3rio"),t())}function Fe(r,i){r&1&&(n(0,"span",10),o(1,"Cidade obrigat\xF3ria"),t())}function Oe(r,i){r&1&&(n(0,"span",10),o(1,"UF obrigat\xF3ria"),t())}function ke(r,i){r&1&&(n(0,"p",27),o(1),t()),r&2&&(l(),D(i))}var be=class r{facade=s(ge);cepService=s(U);snackbar=s(X);fb=s(le);route=s(J);router=s(Y);id=this.route.snapshot.paramMap.get("id");isEdit=!!this.id;loadingCep=!1;form=this.fb.group({nome:["",[p.required,p.minLength(3)]],email:["",[p.email]],telefone:["",[p.required]],cpf:["",[p.minLength(11)]],cep:["",[p.required,p.minLength(8)]],logradouro:["",[p.required]],numero:["",[p.required]],bairro:["",[p.required]],cidade:["",[p.required]],estado:["",[p.required]]});ngOnInit(){this.isEdit&&this.facade.loadTutorDetail(Number(this.id)).subscribe(i=>{i&&this.form.patchValue({nome:i.nome,email:i.email||"",telefone:i.telefone,cpf:i.cpf?String(i.cpf):"",logradouro:i.endereco})})}buscarCep(){let i=this.form.get("cep")?.value;!i||i.length<8||(this.loadingCep=!0,this.cepService.consultarCep(i).subscribe({next:a=>{this.loadingCep=!1,this.form.patchValue({logradouro:a.street,bairro:a.neighborhood,cidade:a.city,estado:a.state}),this.snackbar.success("Endere\xE7o encontrado!")},error:a=>{this.loadingCep=!1,this.snackbar.error("CEP n\xE3o encontrado ou servi\xE7o indispon\xEDvel."),console.error(a)}}))}submit(){if(this.form.invalid){this.form.markAllAsTouched();return}let i=this.form.value,a=`${i.logradouro}, ${i.numero}
     - ${i.bairro}, ${i.cidade}/${i.estado}
     . CEP: ${i.cep}`,e={nome:i.nome,email:i.email,telefone:i.telefone?i.telefone.replace(/\D/g,""):"",endereco:a,cpf:i.cpf?i.cpf.toString().replace(/\D/g,""):null};this.isEdit?this.facade.updateTutor(Number(this.id),e).subscribe(m=>{m&&this.router.navigateByUrl(`/tutores/${m.id}`)}):this.facade.createTutor(e).subscribe(m=>{m?.id?this.router.navigateByUrl(`/tutores/${m.id}`):this.router.navigateByUrl("/tutores")})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=L({type:r,selectors:[["ng-component"]],decls:87,vars:48,consts:[[1,"form-container"],[1,"action-bar"],["routerLink","/tutores",1,"back-button"],[1,"form-card"],[1,"form-title"],[1,"form-subtitle"],[1,"form-grid",3,"ngSubmit","formGroup"],[1,"form-field"],[1,"field-label"],["type","text","formControlName","nome","placeholder","Ex: Jo\xE3o da Silva",1,"field-input"],[1,"validation-error"],["type","email","formControlName","email","placeholder","Ex: joao.silva@email.com",1,"field-input"],["type","tel","formControlName","telefone","mask","(00) 00000-0000","placeholder","(65) 99999-9999",1,"field-input",3,"dropSpecialCharacters"],["type","text","formControlName","cpf","mask","000.000.000-00","placeholder","000.000.000-00",1,"field-input",3,"dropSpecialCharacters"],[1,"col-span-full","mt-2","mb-1"],[1,"text-lg","font-semibold","text-gray-700","border-b","pb-1"],[1,"flex","gap-2"],["type","text","formControlName","cep","mask","00000-000","placeholder","00000-000",1,"field-input","flex-1",3,"blur"],["type","button","mat-icon-button","",1,"bg-orange-100","text-orange-600","hover:bg-orange-200","rounded-lg",3,"click","disabled"],["diameter","20"],["type","text","formControlName","numero","placeholder","N\xBA",1,"field-input"],[1,"form-field","full-width"],["type","text","formControlName","logradouro","placeholder","Nome da rua",1,"field-input"],["type","text","formControlName","bairro","placeholder","Bairro",1,"field-input"],["type","text","formControlName","cidade","placeholder","Cidade",1,"field-input"],["type","text","formControlName","estado","maxlength","2","placeholder","UF",1,"field-input"],["type","submit",1,"submit-button",3,"disabled"],[1,"error-text"],[1,"hint-text"]],template:function(a,e){if(a&1&&(n(0,"div",0)(1,"div",1)(2,"a",2)(3,"mat-icon"),o(4,"arrow_back"),t(),n(5,"span"),o(6,"Voltar"),t()()(),n(7,"div",3)(8,"h1",4),o(9),t(),n(10,"p",5),o(11,"Preencha os dados do tutor"),t(),n(12,"form",6),V("ngSubmit",function(){return e.submit()}),n(13,"div",7)(14,"label",8),o(15,"Nome Completo *"),t(),f(16,"input",9),d(17,ve,2,0,"span",10),t(),n(18,"div",7)(19,"label",8),o(20,"Email"),t(),f(21,"input",11),d(22,he,2,0,"span",10),t(),n(23,"div",7)(24,"label",8),o(25,"Telefone *"),t(),f(26,"input",12),d(27,Ce,2,0,"span",10),t(),n(28,"div",7)(29,"label",8),o(30,"CPF"),t(),f(31,"input",13),d(32,Pe,2,0,"span",10),t(),n(33,"div",14)(34,"h3",15),o(35," Endere\xE7o "),t()(),n(36,"div",7)(37,"label",8),o(38,"CEP *"),t(),n(39,"div",16)(40,"input",17),V("blur",function(){return e.buscarCep()}),t(),n(41,"button",18),V("click",function(){return e.buscarCep()}),d(42,Ee,1,0,"mat-spinner",19)(43,xe,2,0,"mat-icon"),t()(),d(44,Se,2,0,"span",10),t(),n(45,"div",7)(46,"label",8),o(47,"N\xFAmero *"),t(),f(48,"input",20),d(49,Me,2,0,"span",10),t(),n(50,"div",21)(51,"label",8),o(52,"Logradouro (Rua) *"),t(),f(53,"input",22),d(54,ye,2,0,"span",10),t(),n(55,"div",7)(56,"label",8),o(57,"Bairro *"),t(),f(58,"input",23),d(59,Te,2,0,"span",10),t(),n(60,"div",7)(61,"label",8),o(62,"Cidade *"),t(),f(63,"input",24),d(64,Fe,2,0,"span",10),t(),n(65,"div",7)(66,"label",8),o(67,"Estado (UF) *"),t(),f(68,"input",25),d(69,Oe,2,0,"span",10),t(),n(70,"button",26),b(71,"async"),n(72,"mat-icon"),o(73),b(74,"async"),t(),n(75,"span"),o(76),b(77,"async"),t()(),d(78,ke,2,1,"p",27),b(79,"async"),t()(),n(80,"div",28)(81,"mat-icon"),o(82,"info"),t(),o(83," Aten\xE7\xE3o: Upload de foto \xE9 feito no "),n(84,"strong"),o(85,"Perfil do Tutor"),t(),o(86," ap\xF3s cadastro "),t()()),a&2){let m,v,h,C,P,E,x,S,M,y,T,F,O,k,N,w,B,$,I,z,q;l(9),j("",e.isEdit?"Editar":"Novo"," Tutor"),l(3),g("formGroup",e.form),l(4),c("invalid",((m=e.form.get("nome"))==null?null:m.invalid)&&((m=e.form.get("nome"))==null?null:m.touched)),l(),u((v=e.form.get("nome"))!=null&&v.invalid&&((v=e.form.get("nome"))!=null&&v.touched)?17:-1),l(4),c("invalid",((h=e.form.get("email"))==null?null:h.invalid)&&((h=e.form.get("email"))==null?null:h.touched)),l(),u((C=e.form.get("email"))!=null&&C.invalid&&((C=e.form.get("email"))!=null&&C.touched)?22:-1),l(4),c("invalid",((P=e.form.get("telefone"))==null?null:P.invalid)&&((P=e.form.get("telefone"))==null?null:P.touched)),g("dropSpecialCharacters",!1),l(),u((E=e.form.get("telefone"))!=null&&E.invalid&&((E=e.form.get("telefone"))!=null&&E.touched)?27:-1),l(4),c("invalid",((x=e.form.get("cpf"))==null?null:x.invalid)&&((x=e.form.get("cpf"))==null?null:x.touched)),g("dropSpecialCharacters",!1),l(),u((S=e.form.get("cpf"))!=null&&S.invalid&&((S=e.form.get("cpf"))!=null&&S.touched)?32:-1),l(8),c("invalid",((M=e.form.get("cep"))==null?null:M.invalid)&&((M=e.form.get("cep"))==null?null:M.touched)),l(),g("disabled",e.loadingCep),l(),u(e.loadingCep?42:43),l(2),u((y=e.form.get("cep"))!=null&&y.invalid&&((y=e.form.get("cep"))!=null&&y.touched)?44:-1),l(4),c("invalid",((T=e.form.get("numero"))==null?null:T.invalid)&&((T=e.form.get("numero"))==null?null:T.touched)),l(),u((F=e.form.get("numero"))!=null&&F.invalid&&((F=e.form.get("numero"))!=null&&F.touched)?49:-1),l(4),c("invalid",((O=e.form.get("logradouro"))==null?null:O.invalid)&&((O=e.form.get("logradouro"))==null?null:O.touched)),l(),u((k=e.form.get("logradouro"))!=null&&k.invalid&&((k=e.form.get("logradouro"))!=null&&k.touched)?54:-1),l(4),c("invalid",((N=e.form.get("bairro"))==null?null:N.invalid)&&((N=e.form.get("bairro"))==null?null:N.touched)),l(),u((w=e.form.get("bairro"))!=null&&w.invalid&&((w=e.form.get("bairro"))!=null&&w.touched)?59:-1),l(4),c("invalid",((B=e.form.get("cidade"))==null?null:B.invalid)&&((B=e.form.get("cidade"))==null?null:B.touched)),l(),u(($=e.form.get("cidade"))!=null&&$.invalid&&(($=e.form.get("cidade"))!=null&&$.touched)?64:-1),l(4),c("invalid",((I=e.form.get("estado"))==null?null:I.invalid)&&((I=e.form.get("estado"))==null?null:I.touched)),l(),u((z=e.form.get("estado"))!=null&&z.invalid&&((z=e.form.get("estado"))!=null&&z.touched)?69:-1),l(),g("disabled",e.form.invalid||_(71,40,e.facade.saving$)),l(3),D(_(74,42,e.facade.saving$)?"hourglass_empty":"save"),l(3),D(_(77,44,e.facade.saving$)?"Salvando...":"Salvar Tutor"),l(2),u((q=_(79,46,e.facade.error$))?78:-1,q)}},dependencies:[G,R,ae,ie,Z,ee,te,re,ne,oe,K,fe,ce,W,Q,me,se,de,pe,ue],styles:[".form-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:2rem 1rem}.action-bar[_ngcontent-%COMP%]{margin-bottom:2rem}.back-button[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;padding:.625rem 1.25rem;background:#fff;color:#374151;border:2px solid #e5e7eb;border-radius:9999px;font-weight:600;text-decoration:none;transition:all .2s}.back-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem}.back-button[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#f97316;color:#f97316}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:1.5rem;padding:2.5rem;box-shadow:0 10px 30px #0000001a}@media (max-width: 640px){.form-card[_ngcontent-%COMP%]{padding:1.5rem}}.form-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;background:linear-gradient(135deg,#f97316,#fb923c);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 .5rem}.form-subtitle[_ngcontent-%COMP%]{color:#6b7280;margin:0 0 2rem;font-size:1rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem}@media (max-width: 640px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.form-field.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.field-label[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;color:#374151}.field-input[_ngcontent-%COMP%], .field-textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:2px solid #e5e7eb;border-radius:.75rem;font-size:1rem;transition:all .2s;background:#f9fafb}.field-input[_ngcontent-%COMP%]:focus, .field-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f97316;background:#fff;box-shadow:0 0 0 3px #f973161a}.field-input[_ngcontent-%COMP%]::placeholder, .field-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.field-input[_ngcontent-%COMP%]:disabled, .field-textarea[_ngcontent-%COMP%]:disabled{background:#f3f4f6;cursor:not-allowed}.field-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:90px;font-family:inherit}.submit-button[_ngcontent-%COMP%]{grid-column:1/-1;display:inline-flex;align-items:center;justify-content:center;gap:.75rem;padding:1rem 2rem;background:linear-gradient(135deg,#f97316,#fb923c);color:#fff;border:none;border-radius:9999px;font-size:1.125rem;font-weight:700;cursor:pointer;transition:all .3s;margin-top:1rem}.submit-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem;width:1.5rem;height:1.5rem}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 24px #f973164d}.submit-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none}.error-text[_ngcontent-%COMP%]{grid-column:1/-1;padding:.75rem 1rem;background:#fee2e2;border-left:4px solid #dc2626;border-radius:.5rem;color:#dc2626;font-size:.875rem;margin:0}.hint-text[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:1.5rem;padding:1rem;background:#fff;border-radius:.75rem;color:#6b7280;font-size:.875rem;box-shadow:0 2px 4px #0000000d}.hint-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f97316;font-size:1.25rem;width:1.25rem;height:1.25rem;flex-shrink:0}.hint-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#374151}"]})};export{be as TutorFormPage};
