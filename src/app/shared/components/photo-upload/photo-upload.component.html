<div class="rounded-2xl bg-white p-6 shadow">
  <div class="mb-4">
    <h3 class="m-0 text-lg font-bold text-slate-800">{{ title }}</h3>
  </div>

  <!-- Drag & Drop Zone -->
  <div
    class="cursor-pointer rounded-xl border-2 border-dashed p-8 text-center transition bg-slate-50 border-slate-300 hover:bg-slate-100"
    [class.border-orange-500]="isDragging"
    [class.bg-orange-50]="isDragging"
    [class.scale-[1.02]]="isDragging"
    [class.p-0]="!!previewUrl"
    [class.border-0]="!!previewUrl"
    [class.bg-transparent]="!!previewUrl"
    (dragover)="onDragOver($event)"
    (dragleave)="onDragLeave($event)"
    (drop)="onDrop($event)"
  >
    @if (previewUrl) {
      <!-- previsualização -->
      <div class="relative inline-block">
        <img
          [src]="previewUrl"
          class="w-full max-w-[400px] rounded-xl object-cover shadow-[0_10px_25px_rgba(0,0,0,0.15)] max-h-[300px]"
          alt="Preview"
        />
        <button
          mat-icon-button
          type="button"
          class="!absolute right-2 top-2 !bg-black/70 !text-white hover:!bg-black/90"
          (click)="removeFile()"
        >
          <mat-icon>close</mat-icon>
        </button>
      </div>
    } @else {
      <!-- estado vazio -->
      <div class="flex flex-col items-center gap-3">
        <mat-icon class="!h-12 !w-12 !text-orange-500">cloud_upload</mat-icon>

        <p class="m-0 text-sm text-slate-500">Arraste uma imagem ou</p>

        <label
          class="inline-flex items-center gap-2 rounded-full px-5 py-2.5 text-sm font-semibold text-white bg-gradient-to-br from-orange-500 to-orange-400 transition hover:-translate-y-0.5 hover:shadow-lg hover:shadow-orange-500/30 cursor-pointer"
        >
          <mat-icon class="!h-5 !w-5">add_photo_alternate</mat-icon>
          <span>Selecionar Arquivo</span>

          <input
            type="file"
            class="hidden"
            accept="image/*"
            (change)="onFile($event)"
          />
        </label>

        <p class="m-0 text-xs text-slate-400">PNG, JPG, WEBP até 5MB</p>
      </div>
    }
  </div>

  <!-- botão de upload -->
  @if (selectedFile) {
    <button
      mat-raised-button
      type="button"
      color="warn"
      class="upload-btn mt-6 w-full !rounded-xl !py-4 !text-lg !font-bold !text-white !bg-gradient-to-br !from-orange-500 !to-orange-400 hover:!shadow-xl hover:!shadow-orange-500/40"
      [disabled]="uploading"
      (click)="upload.emit(selectedFile!)"
    >
      <mat-icon class="mr-3 upload-icon">
        {{ uploading ? "hourglass_empty" : "upload" }}
      </mat-icon>
      <span>{{ uploading ? "Enviando..." : "Enviar Foto" }}</span>
    </button>
  }

  <!-- mensagem de erro -->
  @if (error) {
    <div
      class="mt-4 flex items-center gap-2 rounded-lg bg-red-100 p-3 text-sm text-red-600"
    >
      <mat-icon class="!h-5 !w-5">error_outline</mat-icon>
      <span>{{ error }}</span>
    </div>
  }
</div>
